<script>
    $(document).ready(() => {
        // if (window.innerWidth > 768) {
        //     InitRandImg();
        //     // chgPic(Math.floor(Math.random() * 13) + 1)
        // }
        // $(window).resize(() => {
        //     if (window.innerWidth > 768) {
        //         if ($('#myNavPics').find('.randImg').length === 0) {
        //             InitRandImg();

        //         }
        //     } else {
        //         $('#myNavPics').empty()
        //     }
        // })
        $("#navbtn").click(() => {
            // var randNum = Math.floor(Math.random() * 13) + 1;
            var randNum = 1;
            $(".lines-button").toggleClass("close");
            if ($("#mySidenav").hasClass("closed")) {
                if (window.innerWidth > 768) {
                    document.getElementById(`randimg-${randNum}`).style.height = "100vh";
                    document.getElementById("myNavPics").style.height = "100%";
                }
                document.getElementById("myNavLinks").style.height = "100%";
                restart_animate(".one");
                restart_animate(".two");
                restart_animate(".three");
                restart_animate(".four");
                document.getElementById("mySidenav").style.height = "100%";
                $("#mySidenav").removeClass("closed").addClass("opened");
            } else if ($("#mySidenav").hasClass("opened")) {
                document.getElementById("mySidenav").style.height = "0";
                if (window.innerWidth > 768) {
                    document.getElementById(`randimg-${randNum}`).style.height = "0";
                }
                $("#mySidenav").removeClass("opened").addClass("closed");
            }
        });
        $(document).on('focusin', function (e) {
            if ($(e.target).closest(".tox-tinymce-aux, .moxman-window, .tam-assetmanager-root")
                .length) {
                e.stopImmediatePropagation();
            }
        });
        if (document.getElementsByClassName('tinyeditor').length > 0) {
        <% if (user && user.role === "admin") {%>
                tinyMCE.init({
                    selector: 'textarea.tinyeditor',
                    plugins: "image, advlist, table, autolink, code, link, lists, paste, preview, searchreplace, wordcount, emoticons, media",
                    toolbar: "styleselect | forecolor | backcolor | bold | italic | underline | alignleft | aligncenter | alignright | alignjustify | bullist | numlist | outdent | indent | link | image | media | code ",
                    paste_enable_default_filters: false,
                    paste_data_images: true,
                    automatic_uploads: true,
                    table_responsive_width: true,
                    images_reuse_filename: true,
                    images_upload_url: '/tinymceUploader',
                    setup: (ed) => {
                        ed.on('init', function (e) {
                            console.log(`${e.target.id} textarea is initialized.`);
                        });
                        ed.on('keyup', function () {
                            console.log(ed.getContent());
                        });
                        ed.on('GetContent', (e) => {
                            console.log(`${e.target.id}'s Content get caught.`);
                        })
                        ed.on('SetContent', (e) => {
                            console.log(`${e.target.id}'s Content get set.`);
                        })
                    }
                })
                <%}%>
        }
    });


    function restart_animate(id) {
        var el = $(id),
            newone = el.clone(true);
        el.before(newone);
        $("." + el.attr("class") + ":last").remove();
    }

    for (let i = 1; i <= 12; i++) {
        $(`#randimg-${i}`).css({
            "background-image": `url("/layouts/headerPic/header-${i}.jpg")`,
            "background-position": "bottom",
            "background-repeat": "no-repeat",
            "background-size": "cover",

        })
    }
    console.log()
    $.each(document.getElementsByClassName('randImg'),(index,val) =>{
        $(`#randimg-${index}`).src = 
        var img = $(this)
        img.src = 
        console.log($(this))
        var img = new Image($(this)); // creating image element
        console.log(img)
        // img.onload = function () { // trigger if the image was loaded
        //     console.log($(this).attr('src') + ' - done!');
        // }

        // img.onerror = function () { // trigger if the image wasn't loaded
        //     console.log($(this).attr('src') + ' - error!');
        // }

        // img.onAbort = function () { // trigger if the image load was abort
        //     console.log($(this).attr('src') + ' - abort!');
        // }

        // img.src = $(this).attr('src'); // pass src to image object

        // // log image attributes
        // console.log(img.src);
        // console.log(img.width);
        // console.log(img.height);
        // console.log(img.complete);

    });

    // function chgPic(initPic) {
    //     var picNow = "#ramdImg-6";
    //     $('#links li').hover(() => {
    //         InrandNum = Math.floor(Math.random() * 13) + 1;
    //         $(picNow).velocity({
    //             opacity: 0
    //         }).then(() => {
    //             $(`#randImg-${InrandNum}`).velocity({
    //                 opacity: 1
    //             });
    //             picNow = $(`#randImg-${InrandNum}`);
    //         })
    //     })
    // }
</script>