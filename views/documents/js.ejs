<script>
    var textid = 0;
    $(document).ready(function () {
            //身分選擇動畫
            $(".identity").show();
            $(".under").hover(function(){
                $(this).addClass("big");
            },function(){
                $(this).removeClass("big");
            });
            $(".gra").hover(function(){
                $(this).addClass("big link");
            },function(){
                $(this).removeClass("big");
            });
            $(".com").hover(function(){
                $(this).addClass("big link");
            },function(){
                $(this).removeClass("big");
            });
/*--------------------------------------管理者---------------------------------------------*/
            
            /*CKEDITOR.replace('add_text', {           
                    filebrowserUploadUrl: '/uploader',
                });
            CKEDITOR.replace('change_text', {           
                    filebrowserUploadUrl: '/uploader',
                });*/

            //選擇新增或修改
            $(".option").mousedown(function(){
                $("#edit_modify").modal("show");
                textid = this.id;
                $.ajax({
                    url: "/documents/require_data/" + textid,
                    method: 'get',
                    error: function (err) {
                        console.log(err);
                    },
                    success: function (data) {
                        $("#show_title").empty();
                        $("#show_content").empty();
                        $("#show_title").append(data.title);
                        //CKEDITOR.instances.edit_content.setData(data.content);
                        $("#show_content").append(data.content);
                        }
                });
            })

            //新增

            $("#new_data").click(function (){
                $("#edit").modal("show");


                $("#save").click(function(){
                    $("#modify").modal("hide");
                });
            })
            
            //修改
            $("#modify_data").click(function (){
                //let textid = this.id; 
                $("#modify").modal("show");

                //將js的變數給html裡的form action
                $('#change').attr('action', "/documents/modify/" + textid);

                $.ajax({
                    url: "/documents/require_data/" + textid,
                    method: 'get',
                    error: function (err) {
                        console.log(err);
                    },
                    success: function (data) {
                        
                        $("#modify_title").val(data.title);
                        //CKEDITOR.instances.edit_content.setData(data.content);
                        $("#modify_content").val(data.content);
                        }
                });

                $("#save").click(function(){
                    $("#modify").modal("hide");
                });
            })

        
            //調整modal跳出來的位置
            $('#edit').on('show.bs.modal', function () {
                $(this).css("top","20%");
            })
            $('#modify').on('show.bs.modal', function () {
                $(this).css("top","20%");
            })
            $('#edit_modify').on('show.bs.modal', function () {
                $(this).css("top","20%");
            })

    })
    //新增的時候將id傳到modal
    function getid(){
        $('input[name=id]').val(textid);
    }
</script>