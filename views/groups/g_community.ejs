<!DOCTYPE html>
<html>

<head>
    <title>
        <%= title %>
    </title>
    <% include ../layouts/head %>
        <% include ../layouts/script %>
            <link rel='stylesheet' href='/groups/style.css' />
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
</head>

<body class="yellowBg">
    <% include ../layouts/header %>

        <div class="title_bar">

            <div class="line"></div>
            <div class="title">
                <h1>COMMUNITY<br><span class="small_title">社群</span></h1>
            </div>
            <div class="navbar">
                <img src="/groups/line.png" id="cuttingline">
                <a class="nava" style="top:3px; left:11vw;" href="/groups/department"><img src="/groups/系所鈕.PNG" class="navimg"><br>系所</a>
                <a class="nava" style="top:3px; left:26.5vw;" href="http://club.adm.ncu.edu.tw/clubs" target="_blank"><img src="/groups/社團鈕.PNG" class="navimg"><br>社團</a>
                <a class="nava" style="top:3px; left:43vw;" href="/groups/association"><img src="/groups/學生會鈕.PNG" class="navimg"><br>學生會</a>
                <a class="nava" style="top:3px; left:59.25vw;" href="/groups/community"><img src="/groups/社群鈕.PNG" class="navimg"><br>社群</a>
                <a class="nava" style="top:3px; left:76vw;" href="/groups/others"><img src="/groups/其他鈕.PNG" class="navimg"><br>其他學生組織</a>
            </div>
        </div>
        <%if(user && user.role==="admin"){%>
            <div class="buttons">
                <button type="button" class="btn btn-primary " data-toggle="modal" data-target="#add">
            新增社群
        </button>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#edit_delete">
            編輯/刪除社群
        </button>
            </div>
            <%}%>

                <div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Add Community</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                            </div>
                            <div class="modal-body">
                                <form action="/groups/add_community" method="post">
                                    <div class="form-group">
                                        <label for="name" class="col-form-label">社群名稱</label>
                                        <input type="text" class="form-control" id="name" name="name">
                                    </div>

                                    <div class="form-group">
                                        <label for="intro" class="col-form-label">社群介紹</label>
                                        <textarea class="form-control" id="intro" name="intro" rows="8"></textarea>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary">Save</button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal fade" id="edit_delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">edit&delete</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label for="name" class="col-form-label">社群名稱</label>
                                        <select name="name" id="select_community_name" class="form-control">
                                        <% for(var i in community) {%>
                                        <option value="<%= community[i].name%>"><%=community[i].name%></option>
                                        <%}%>
                                                </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="edit_intro" class="col-form-label">社群介紹</label>
                                        <textarea class="form-control" id="edit_intro" name="intro" rows="8"></textarea>
                                    </div>

                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button id="edit_community_submit" class="btn btn-primary">Save changes</button>
                                <button id="delete_community_submit" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar">
                    <ul>
                        <% for(var i in community) {%>
                            <a style="text-decoration:none; color: #0D4966;" href="/groups/community/<%=community[i].name%>">
                <li class="sideli" id="<%=community[i].name%>"><i class="fas fa-angle-right"></i>
                    <%=community[i].name%>
                </li>
            </a>
                            <%}%>
                    </ul>
                </div>

                <%_ if(community_this!==null){ -%>
                    <div class="info">
                        <div class="community">
                            <%=community_this.name%>
                        </div>
                        <div class="content">
                            <%=community_this.intro%>
                        </div>


                    </div>


                    <%_ } -%>
                        <img src="社群.PNG" class=backgroundimg>


                        <script src="/groups/js/groups.js"></script>

                        <% include ../layouts/js %>
</body>

</html>